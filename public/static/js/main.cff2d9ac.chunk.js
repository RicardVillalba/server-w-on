(this["webpackJsonpreact-auth-client"]=this["webpackJsonpreact-auth-client"]||[]).push([[0],{31:function(e,t,a){e.exports=a(59)},36:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),l=a.n(o),c=a(7),i=a(3),s=a(4),u=a(6),m=a(5),p=(a(36),a(1)),h=a(11),g=a.n(h),d=r.a.createContext(),v=d.Consumer,f=d.Provider;function E(e){return function(t){return r.a.createElement(v,null,(function(a){return r.a.createElement(e,Object.assign({},t,{user:a.user,isLoggedIn:a.isLoggedIn,isLoading:a.isLoading,login:a.login,signup:a.signup,logout:a.logout}))}))}}var b=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:null,isLoggedIn:!1,isLoading:!0},e.login=function(t,a){g.a.post("https://w-on.herokuapp.com/auth/login",{username:t,password:a},{withCredentials:!0}).then((function(t){var a=t.data;e.setState({isLoggedIn:!0,isLoading:!1,user:a})})).catch((function(e){return console.log(e)}))},e.signup=function(t,a,n,r){g.a.post("https://w-on.herokuapp.com/auth/signup",{username:t,password:a,email:n,tel:r},{withCredentials:!0}).then((function(t){var a=t.data;e.setState({isLoggedIn:!0,isLoading:!1,user:a})})).catch((function(e){return console.log(e)}))},e.logout=function(){g.a.get("https://w-on.herokuapp.com/auth/logout",{withCredentials:!0}).then((function(t){e.setState({isLoggedIn:!1,isLoading:!1,user:null})})).catch((function(e){return console.log(e)}))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.a.get("https://w-on.herokuapp.com/auth/me",{withCredentials:!0}).then((function(t){var a=t.data;console.log("user from AUTH",a),e.setState({isLoggedIn:!0,isLoading:!1,user:a})})).catch((function(t){return e.setState({isLoggedIn:!1,isLoading:!1,user:null})}))}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.isLoggedIn,n=e.isLoading,o=this.login,l=this.signup,c=this.logout;return r.a.createElement(f,{value:{user:t,isLoggedIn:a,isLoading:n,login:o,signup:l,logout:c}},this.props.children)}}]),a}(r.a.Component),w=E(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=(e.user,e.logout),a=e.isLoggedIn;return r.a.createElement("nav",{className:"navbar"},a?r.a.createElement("div",{className:"navbarbutton"},r.a.createElement(c.b,{to:"/profile"},r.a.createElement("img",{src:"../../images/profile.jpg",alt:"profile"})),r.a.createElement(c.b,{to:"/search"},r.a.createElement("img",{src:"../../images/search.jpg",alt:"search"})),r.a.createElement(c.b,{to:"/"},r.a.createElement("button",{onClick:t}," Logout "))):r.a.createElement(r.a.Fragment,null))}}]),a}(n.Component));var y=function(){return r.a.createElement("div",{className:"logo"},r.a.createElement(c.b,{className:"textLogo",to:"/login"},"U-ON"))},j=a(15),O=E(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",email:"",tel:""},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password,o=a.email,l=a.tel;e.props.signup(n,r,o,l)},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(j.a)({},n,r))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.email,o=e.tel;return r.a.createElement("div",{className:"signup"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"divform"},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange})),r.a.createElement("div",{className:"divform"},r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange})),r.a.createElement("div",{className:"divform"},r.a.createElement("label",null,"email:"),r.a.createElement("input",{type:"text",name:"email",value:n,onChange:this.handleChange})),r.a.createElement("div",{className:"divform"},r.a.createElement("label",null,"tel:"),r.a.createElement("input",{type:"text",name:"tel",value:o,onChange:this.handleChange})),r.a.createElement("input",{type:"submit",className:"submit",value:"Signup"}),r.a.createElement("p",{className:"redirectButton"},"Already have account?"),r.a.createElement(c.b,{to:"/login"}," ",r.a.createElement("button",{className:"redirectButton"},"Login")," ")))}}]),a}(n.Component)),C=E(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password;e.props.login(n,r)},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(j.a)({},n,r))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return r.a.createElement("div",{className:"login"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"divform"},r.a.createElement("label",{className:"labelform"},"Username:"),r.a.createElement("input",{type:"text",className:"inputForm",name:"username",value:t,onChange:this.handleChange})),r.a.createElement("div",{className:"divform"},r.a.createElement("label",{className:"labelform"},"Password:"),r.a.createElement("input",{type:"password",className:"inputForm",name:"password",value:a,onChange:this.handleChange})),r.a.createElement("div",null,r.a.createElement("input",{type:"submit",className:"submit",value:"Login"})),r.a.createElement(c.b,{to:"/signup"}," ",r.a.createElement("button",{className:"redirectButton"},"Sign Up")," ")))}}]),a}(n.Component)),N=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={image:null,labels:""},e.handleChange=function(t){var a=t.target.files[0],n=new FormData;n.append("image",a),g.a.post("https://w-on.herokuapp.com/cloudinary",n).then((function(t){var a=t.data;console.log("imageUrl",a),e.setState({image:a})})).catch((function(e){return console.log(e)}))},e.handleSubmit=function(t){t.preventDefault();var a=e.state.image;g.a.post("https://w-on.herokuapp.com/cloudvision",{imageUrl:a},{withCredentials:!0}).then((function(t){console.log(t.data);var a="";t.data.forEach((function(e){a+=e.description+"&"})),e.setState({labels:a})})).catch((function(e){return console.log(e)}))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){g.a.get("https://www.googleapis.com/customsearch/v1?key=AIzaSyBj3pId_iDg4MGA2-5khVCzkEDHuUFv92s&cx=005967262815925650944:xavy6rlohqb&q=".concat("this.state.labels")).then((function(e){return console.log(e.data.items)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return console.log("labels",this.state.labels),r.a.createElement("div",{className:"uploadImg"},r.a.createElement("form",{onSubmit:this.handleSubmit,action:"/search",method:"POST",enctype:"multipart/form-data"},r.a.createElement("input",{onChange:this.handleChange,type:"file",name:"photo",id:"img"}),r.a.createElement("label",{for:"img"},"add"),r.a.createElement("button",{type:"submit"},"search")))}}]),a}(n.Component),L=E(function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:{}},console.log(n.props),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;g.a.get("https://w-on.herokuapp.com/auth/me",{withCredentials:!0}).then((function(e){return e.data._id})).then((function(e){return g.a.get("https://w-on.herokuapp.com"+"/user/".concat(e),{withCredentials:!0})})).then((function(t){e.setState({user:t.data})}))}},{key:"render",value:function(){var e=this.state.user,t=e.username,a=e.email,n=e.tel,o=e.favorites;return r.a.createElement("div",null,r.a.createElement("div",{className:"userdata"},r.a.createElement("div",{className:"userdataText"},r.a.createElement("h4",null,"user: ",t),r.a.createElement("h4",null,"email: ",a),r.a.createElement("h4",null,"tel: ",n),r.a.createElement("h4",null,"edit"))),r.a.createElement("h4",{className:"favTitle"},"favorites"),r.a.createElement("div",{className:"favorites"},o?o.map((function(e){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("img",{className:"favs",src:e.imageUrl,alt:"favorite img"})))})):r.a.createElement("p",null,"loading...")))}}]),a}(n.Component)),k=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"foto"))}}]),a}(n.Component);var S=E((function(e){console.log("props :>> ",e);var t=e.exact,a=e.path,n=e.component,o=e.isLoggedIn,l=n;return r.a.createElement(p.b,{exact:t,path:a,render:function(e){return o?r.a.createElement(p.a,{to:"/profile"}):o?void 0:r.a.createElement(l,e)}})}));var x=E((function(e){console.log("props :>> ",e);var t=e.exact,a=e.path,n=e.component,o=e.isLoggedIn,l=n;return r.a.createElement(p.b,{exact:t,path:a,render:function(e){return o?r.a.createElement(l,e):o?void 0:r.a.createElement(p.a,{to:"/login"})}})})),I=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(w,null),r.a.createElement(p.d,null,r.a.createElement(S,{exact:!0,path:"/",component:y}),r.a.createElement(x,{exact:!0,path:"/search",component:N}),r.a.createElement(x,{exact:!0,path:"/profile",component:L}),r.a.createElement(x,{exact:!0,path:"/item/:id",component:k}),r.a.createElement(S,{exact:!0,path:"/signup",component:O}),r.a.createElement(S,{exact:!0,path:"/login",component:C})))}}]),a}(n.Component);l.a.render(r.a.createElement(c.a,null,r.a.createElement(b,null,r.a.createElement(I,null))),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.cff2d9ac.chunk.js.map